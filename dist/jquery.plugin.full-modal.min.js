"use strict";function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(n,i,e){return i&&t(n.prototype,i),e&&t(n,e),n}}();!function(t,n){function i(){return""+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"full-modal-")+Date.now()}function e(t){return"string"==typeof t}function o(t,n){var i={};return["webkit","moz","ms","o"].forEach(function(e){i["-"+e+"-"+t]=n}),i}if(!n)throw new Error("请先加载jquery");var a=new Map,s=[],r=void 0,l=function(){function t(i,e){if(_classCallCheck(this,t),r instanceof t)return r;this.isOpen=!1,this.duration=e,this.container=n(i),this.initialize()}return _createClass(t,[{key:"initialize",value:function(){var t=this.$el=n('<div class="ibs-backdrop"></div>');this.container.append(t),t.on("click",function(){s.forEach(function(t){t.option.closeWhenClickBackdrop&&t.close()})})}},{key:"open",value:function(){this.$el.fadeIn(this.duration),this.isOpen=!0}},{key:"close",value:function(){s.filter(function(t){return t.isOpen}).length>1||(this.$el.fadeOut(this.duration),this.isOpen=!1)}}]),t}(),c=function(){function t(n,i){_classCallCheck(this,t),this.$el=n,this.option=i,this.$modalEl=this.$el.find(".ibs-full-modal"),this.isOpen=!1,this.isActivated=!1,this.backdrop=r=new l("body",i.duration+200),this.initialize()}return _createClass(t,[{key:"initialize",value:function(){var t=this;this.option.closeWhenClickBackdrop&&this.$el.on("click",function(){return t.close()}),this.$modalEl.on("click",function(t){return t.stopPropagation()}).on("click",".ibs-btn-close",function(){return t.close()}),this.$modalEl.css(o("transition","all "+this.option.duration+"ms"))}},{key:"open",value:function(){var t=this;this.option.beforeOpen.call(this),this.activate(),this.backdrop.open(),this.$el.show(),this.$modalEl.animate({background:"#fff"},this.option.duration,function(){n("body").addClass("full-modal-open"),t.option.afterOpen.call(t)}).css(o("transform","translateX(0)")).css({opacity:1}),this.isOpen=!0}},{key:"close",value:function(){var t=this;this.option.beforeClose.call(this),this.backdrop.close(),this.$modalEl.animate({background:"transparent"},this.option.duration,function(){n("body").removeClass("full-modal-open"),t.option.afterClose.call(t),t.$el.hide(),t.deactivate()}).css(o("transform","translateX(30%)")).css({opacity:0}),this.isOpen=!1}},{key:"activate",value:function(){var t=this;s.forEach(function(n){n===t?(n.isActivated=!0,n.$el.css({zIndex:102})):(n.isActivated=!1,n.$el.css({zIndex:101}))})}},{key:"deactivate",value:function(){this.isActivated=!1,this.$el.css({zIndex:101})}}]),t}(),u=["open","close"],f={duration:300,trigger:"",closeWhenClickBackdrop:!0,beforeOpen:n.noop,beforeClose:n.noop,afterOpen:n.noop,afterClose:n.noop};n.fn.fullModal=function(t){return this.each(function(){var o=n(this);if(e(t)){var r=a.get(o.data("uniqueId")),l=t;return r?u.indexOf(l)<0?console.error('method:"'+l+'" is not allowed invoke on modal instance,expected method are ["open","close"]'):r[l]():console.error("please initialize modal first")}var h=n.extend(f,t),d=i(),p=new c(o,h);o.data("uniqueId",d),a.set(d,p),s.push(p),h.trigger&&n(h.trigger).on("click",function(){p.open()})})}}(window,jQuery);
//# sourceMappingURL=jquery.plugin.full-modal.min.js.map
